package pacmanfx;

import java.util.Timer;
import java.util.TimerTask;
import javafx.animation.Animation;
import javafx.animation.KeyFrame;
import javafx.animation.Timeline;
import javafx.event.ActionEvent;
import javafx.event.EventHandler;
import javafx.scene.canvas.GraphicsContext;
import javafx.scene.paint.Color;
import javafx.util.Duration;

public interface Maze {
    short[] getLevelData();
    int getEnemyCount();
    void setEnemyCount(int enemyCount);
    int getHBlocks();
    int getVBlocks();
    void drawMaze(GraphicsContext g2d);
}

abstract class GeneralMaze implements Maze {
    protected Model model;
    protected Character player;
    protected final int H_BLOCKS = 25;
    protected final int V_BLOCKS = 24;
    protected static final int BLOCK_SIZE = 40;
    protected int enemyCount;
    protected short[] levelData;
    
    public GeneralMaze(Model model, int enemyCount, short[] levelData) {
        this.model = model;
        this.enemyCount = enemyCount;
        this.levelData = levelData;
    }

    @Override
    public short[] getLevelData() {
        return levelData;
    }

    @Override
    public int getEnemyCount() {
        return enemyCount;
    }

    @Override
    public void setEnemyCount(int enemyCount) {
        this.enemyCount = enemyCount;
    }

    @Override
    public int getHBlocks() {
        return H_BLOCKS;
    }

    @Override
    public int getVBlocks() {
        return V_BLOCKS;
    }

    @Override
    public void drawMaze(GraphicsContext g2d) {
        short i = 0;
        int x, y;
        for (y = 0; y < model.getScreenVSize(); y += BLOCK_SIZE) {
            for (x = 0; x < model.getScreenHSize(); x += BLOCK_SIZE) {

                g2d.setStroke(Color.GREY);
                g2d.setLineWidth(5);

                if (levelData[i] == 0) {
                    g2d.drawImage(model.floor2, x, y);
                }

                if ((levelData[i] & 1) != 0) {
                    g2d.strokeLine(x, y, x, y + BLOCK_SIZE - 1);
                }

                if ((levelData[i] & 2) != 0) {
                    g2d.strokeLine(x, y, x + BLOCK_SIZE - 1, y);
                }

                if ((levelData[i] & 4) != 0) {
                    g2d.strokeLine(x + BLOCK_SIZE - 1, y, x + BLOCK_SIZE - 1, y + BLOCK_SIZE - 1);
                }

                if ((levelData[i] & 8) != 0) {
                    g2d.strokeLine(x, y + BLOCK_SIZE - 1, x + BLOCK_SIZE - 1, y + BLOCK_SIZE - 1);
                }

                if ((model.screenData[i] & 16) != 0) {
                    double coinX = x + BLOCK_SIZE / 2 - (model.coin).getWidth() / 2;
                    double coinY = y + BLOCK_SIZE / 2 - (model.coin).getHeight() / 2;
                    g2d.drawImage(model.coin, coinX, coinY);
                }

                if ((model.screenData[i] & 32) != 0) {
                    double powerupX = x + BLOCK_SIZE / 2 - (model.sword).getWidth() / 2;
                    double powerupY = y + BLOCK_SIZE / 2 - (model.sword).getHeight() / 2;
                    g2d.drawImage(model.sword, powerupX, powerupY);
                }
                
                if ((model.screenData[i] & 64) != 0) {
                    double trapX = x + BLOCK_SIZE / 2 - (model.spike).getWidth() / 2;
                    double trapY = y + BLOCK_SIZE / 2 - (model.spike).getHeight() / 2;
                    g2d.drawImage(model.spike, trapX, trapY);
                }

                i++;
            }
        }
    }
}

class Maze1 extends GeneralMaze {
    private static final short[] LEVEL_DATA = {
        0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
 0,19,26,18,26,22,0,0,0,19,22,0,19,18,26,22,0,19,26,22,0,19,26,22,0,
 0,21,0,21,0,21,0,0,0,17,24,18,24,28,0,21,0,21,0,21,0,21,0,21,0,
 0,25,18,20,0,17,26,18,26,20,0,21,0,0,0,17,26,24,18,24,26,24,26,28,0,
 0,0,21,0,19,20,0,45,0,21,0,21,0,23,0,21,0,0,21,0,0,0,0,0,0,
 0,0,21,0,17,20,0,21,0,21,0,17,26,20,0,17,26,26,24,18,26,26,26,22,0,
 0,0,21,0,17,24,26,24,26,24,26,28,0,25,26,20,0,0,0,21,0,0,0,21,0,
 0,19,28,0,21,0,0,0,0,0,0,0,0,0,0,17,21,0,19,24,22,0,19,28,0,
 0,21,0,19,24,22,0,0,23,0,19,26,18,26,18,24,20,0,21,0,21,0,21,0,0,
 0,21,0,21,0,21,0,0,21,0,21,0,21,0,21,0,17,26,16,26,20,0,25,22,0,
 0,21,0,21,0,21,0,0,17,18,16,26,20,0,17,18,20,0,21,0,21,0,0,21,0,
 0,25,18,24,26,16,22,0,17,24,28,0,21,0,25,24,28,0,25,26,24,26,26,24,0,
 0,0,21,0,0,17,24,18,28,0,0,0,21,0,0,0,0,0,0,0,0,0,0,0,0,
 0,0,21,0,0,21,0,21,0,19,18,26,24,26,18,18,24,18,18,26,22,0,19,20,0,
 0,0,17,18,26,16,26,28,0,17,20,0,0,0,17,20,0,17,20,0,21,0,17,20,0,
 0,19,24,20,0,21,0,0,0,25,16,24,0,19,24,16,24,0,25,18,20,0,17,28,0,
 0,21,0,21,0,17,18,26,22,0,17,20,0,21,0,17,24,22,0,25,20,0,21,0,0,
 0,25,26,20,0,25,20,0,21,0,17,20,0,25,26,28,0,25,22,0,21,0,21,0,0,
 0,0,0,21,0,0,17,26,20,0,17,20,0,0,0,0,23,0,17,26,20,0,21,0,0,
 0,19,26,24,22,0,21,0,25,26,24,20,0,19,22,0,21,0,21,0,21,0,25,22,0,
 0,21,0,0,21,0,21,0,0,0,0,17,26,24,20,0,21,0,17,26,28,0,0,21,0,
 0,21,0,0,21,0,21,0,19,18,26,20,0,0,21,0,17,26,20,0,0,0,19,28,0,
 0,25,26,26,24,26,28,0,25,28,0,25,26,26,24,26,28,0,25,26,26,26,28,0,0,
 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0

    };

    public Maze1(Model model) {
        super(model, 2, LEVEL_DATA);
    }
}

class Maze2 extends GeneralMaze {
    private static final short[] LEVEL_DATA = {
        0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
        0,19,26,26,26,26,18,26,26,18,26,26,18,26,26,18,26,26,18,26,26,26,26,22,0,
        0,21,0,0,0,0,21,0,0,21,0,0,21,0,0,21,0,0,21,0,0,0,0,21,0,
        0,21,0,0,0,0,21,0,19,24,22,0,21,0,19,24,22,0,21,0,0,0,0,21,0,
        0,17,26,26,26,26,20,0,21,0,21,0,21,0,21,0,21,0,17,26,26,26,26,20,0,
        0,21,0,0,0,0,21,0,21,0,17,26,16,26,20,0,21,0,21,0,0,0,0,21,0,
        0,17,26,26,18,26,24,26,20,0,21,0,21,0,21,0,17,26,24,26,18,26,26,20,0,
        0,21,0,0,21,0,0,0,21,0,21,0,21,0,21,0,21,0,0,0,21,0,0,21,0,
        0,21,0,19,24,26,18,26,28,0,17,26,24,26,20,0,25,26,18,26,24,22,0,21,0,
        0,21,0,21,0,0,21,0,0,0,21,0,0,0,21,0,0,0,21,0,0,21,0,21,0,
        0,21,0,21,0,0,21,0,19,26,24,26,18,26,24,26,22,0,21,0,0,21,0,21,0,
        0,17,26,24,22,0,25,26,20,0,0,0,21,0,0,0,17,26,28,0,19,24,26,20,0,
        0,21,0,0,21,0,0,0,21,0,0,0,21,0,0,0,21,0,0,0,21,0,0,21,0,
        0,21,0,0,17,26,26,26,24,26,18,26,16,26,18,26,24,26,26,26,20,0,0,21,0,
        0,17,26,26,20,0,0,0,0,0,21,0,21,0,21,0,0,0,0,0,17,26,26,20,0,
        0,21,0,0,21,0,0,19,26,26,28,0,21,0,25,26,26,22,0,0,21,0,0,21,0,
        0,17,26,18,20,0,0,21,0,0,0,0,21,0,0,0,0,21,0,0,17,18,26,20,0,
        0,21,0,17,24,26,26,24,18,26,18,26,24,26,18,26,18,24,26,26,24,20,0,21,0,
        0,21,0,21,0,0,0,0,21,0,21,0,0,0,21,0,21,0,0,0,0,21,0,21,0,
        0,17,26,24,26,26,22,0,21,0,17,26,26,26,20,0,21,0,19,26,26,24,26,20,0,
        0,21,0,0,0,0,21,0,25,26,20,0,0,0,17,26,28,0,21,0,0,0,0,21,0,
        0,21,0,0,0,0,21,0,0,0,21,0,0,0,21,0,0,0,21,0,0,0,0,21,0,
        0,25,26,26,26,26,24,26,26,26,24,26,26,26,24,26,26,26,24,26,26,26,26,44,0,
        0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
    };

    public Maze2(Model model) {
        super(model, 4, LEVEL_DATA);
    }
}

class Maze3 extends GeneralMaze {
    private static final short[] LEVEL_DATA = {
        0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
        0,19,26,18,26,18,26,26,18,26,26,18,26,18,26,22,0,0,0,0,0,0,0,0,0,
        0,21,0,21,0,21,0,0,21,0,0,21,0,21,0,21,0,0,0,0,0,0,0,0,0,
        0,21,0,21,0,25,26,26,16,26,26,28,0,21,0,21,0,0,0,0,0,0,0,0,0,
        0,21,0,21,0,0,0,0,21,0,0,0,0,21,0,21,0,0,0,0,0,0,0,0,0,
        0,21,0,17,26,26,26,26,16,26,26,26,26,20,0,21,0,0,0,0,0,0,0,0,0,
        0,21,0,21,0,0,0,0,21,0,0,0,0,21,0,21,0,0,0,0,0,0,0,0,0,
        0,17,26,20,0,19,26,18,24,18,26,22,0,17,26,20,0,0,0,0,0,0,0,0,0,
        0,21,0,21,0,21,0,21,0,21,0,21,0,21,0,21,0,0,0,0,0,0,0,0,0,
        0,21,0,17,26,20,0,21,0,21,0,17,26,20,0,21,0,0,0,0,0,0,0,0,0,
        0,21,0,21,0,21,0,21,0,21,0,21,0,21,0,21,0,0,0,0,0,0,0,0,0,
        0,21,0,21,0,25,26,24,18,24,26,28,0,21,0,21,0,0,0,0,0,0,0,0,0,
        0,21,0,21,0,0,0,0,21,0,0,0,0,21,0,21,0,0,0,0,0,0,0,0,0,
        0,21,0,17,26,26,26,26,16,26,26,26,26,20,0,21,0,0,0,0,0,0,0,0,0,
        0,21,0,21,0,0,0,0,21,0,0,0,0,21,0,21,0,0,0,0,0,0,0,0,0,
        0,25,26,24,26,26,26,26,24,26,26,26,26,24,26,44,0,0,0,0,0,0,0,0,0,
        0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
        0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
        0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
        0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
        0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
        0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
        0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
        0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
    };

    public Maze3(Model model) {
        super(model, 6, LEVEL_DATA);
    }
}
